/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package gui;

import init.ComboItem;
import init.MainClass;

import java.awt.Color;
import java.awt.Component;
import java.util.ArrayList;
import java.util.Date;

import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JRadioButton;
import javax.swing.JTextField;

import com.toedter.calendar.JDateChooser;

import utils.E_Airports;
import utils.HelperClass;
import core.Airplane;
import exceptions.AddFlightExeption;

/**
 *The class represents the screen which enable users to add {@link core.Flight } to the {@link init.IFly } class 
 *
 * @author Matan
 */
public class AddFlight extends MyInternalFrame {

	/**
	 * Creates new form AddFlight
	 * 
	 * @param title
	 * @param type
	 */
	public AddFlight(String title, String type) {
		super(title, type);
		initComponents();
		fillCbAirports();
		fillAirplaines(null);
		if (cbAirplaines.getModel().getSize() <= 0) {
			rbManually.setSelected(true);
			airplaineMode(false);
		} else {
			rbAirplain.setSelected(true);
			airplaineMode(true);
		}

		lblSeatsErr.setVisible(false);
		setLables();
		btnOk.setToolTipText(utils.Constants.saveButtonToolTip);
	}

	/**
	 * This method is called from within the constructor to initialize the form.
	 * WARNING: Do NOT modify this code. The content of this method is always
	 * regenerated by the Form Editor.
	 */
	@SuppressWarnings("unchecked")
	// <editor-fold defaultstate="collapsed"
	// desc="Generated Code">//GEN-BEGIN:initComponents
	private void initComponents() {

		buttonGroup1 = new javax.swing.ButtonGroup();
		jPanel1 = new javax.swing.JPanel();
		jLabel1 = new javax.swing.JLabel();
		jLabel2 = new javax.swing.JLabel();
		jLabel3 = new javax.swing.JLabel();
		jPanel2 = new javax.swing.JPanel();
		jLabel9 = new javax.swing.JLabel();
		jLabel10 = new javax.swing.JLabel();
		jLabel11 = new javax.swing.JLabel();
		lblBCErr = new javax.swing.JLabel();
		lblFCErr = new javax.swing.JLabel();
		lblTCErr = new javax.swing.JLabel();
		txtBCNum = new javax.swing.JTextField();
		txtFCNum = new javax.swing.JTextField();
		txtTCNum = new javax.swing.JTextField();
		jLabel7 = new javax.swing.JLabel();
		txtAirplaneNum = new javax.swing.JTextField();
		lblAirplaineErr = new javax.swing.JLabel();
		lblSeatsErr = new javax.swing.JLabel();
		txtFlightNum = new javax.swing.JTextField();
		lblFlightNumErr = new javax.swing.JLabel();
		lblSorceDateErr = new javax.swing.JLabel();
		lblDetinationDateErr = new javax.swing.JLabel();
		btnOk = new javax.swing.JButton();
		jPanel3 = new javax.swing.JPanel();
		jLabel4 = new javax.swing.JLabel();
		txtFlightCost = new javax.swing.JTextField();
		lblFlightCostErr = new javax.swing.JLabel();
		jLabel5 = new javax.swing.JLabel();
		cbSource = new javax.swing.JComboBox();
		jLabel8 = new javax.swing.JLabel();
		cbDestination = new javax.swing.JComboBox();
		jdSourceDate = new com.toedter.calendar.JDateChooser();
		jdDestinationDate = new com.toedter.calendar.JDateChooser();
		rbAirplain = new javax.swing.JRadioButton();
		rbManually = new javax.swing.JRadioButton();
		jLabel6 = new javax.swing.JLabel();
		cbAirplaines = new javax.swing.JComboBox();

		jLabel1.setText("Flight Number:");

		jLabel2.setText("Source Date:");

		jLabel3.setText("Destination Date:");

		jPanel2.setBorder(javax.swing.BorderFactory
				.createTitledBorder("Airplain Details:"));

		jLabel9.setText("Business Class:");

		jLabel10.setText("First Class:");
		jLabel10.setPreferredSize(new java.awt.Dimension(73, 14));

		jLabel11.setText("Tourists Class:");
		jLabel11.setPreferredSize(new java.awt.Dimension(73, 14));

		lblBCErr.setName("lnlBCErr"); // NOI18N

		lblFCErr.setName("lblFCErr"); // NOI18N

		lblTCErr.setName("lblTCErr"); // NOI18N

		jLabel7.setText("Airplane Number:");

		javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(
				jPanel2);
		jPanel2.setLayout(jPanel2Layout);
		jPanel2Layout
				.setHorizontalGroup(jPanel2Layout
						.createParallelGroup(
								javax.swing.GroupLayout.Alignment.LEADING)
						.addGroup(
								jPanel2Layout
										.createSequentialGroup()
										.addContainerGap()
										.addGroup(
												jPanel2Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.LEADING,
																false)
														.addComponent(
																jLabel11,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE)
														.addComponent(
																jLabel10,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE)
														.addComponent(
																lblFCErr,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																189,
																Short.MAX_VALUE)
														.addComponent(
																lblBCErr,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																Short.MAX_VALUE)
														.addGroup(
																jPanel2Layout
																		.createSequentialGroup()
																		.addGroup(
																				jPanel2Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.LEADING,
																								false)
																						.addComponent(
																								jLabel7,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								Short.MAX_VALUE)
																						.addComponent(
																								jLabel9,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								Short.MAX_VALUE))
																		.addGap(18,
																				18,
																				18)
																		.addGroup(
																				jPanel2Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.LEADING,
																								false)
																						.addComponent(
																								txtFCNum,
																								javax.swing.GroupLayout.Alignment.TRAILING,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								88,
																								Short.MAX_VALUE)
																						.addComponent(
																								txtBCNum,
																								javax.swing.GroupLayout.Alignment.TRAILING)
																						.addComponent(
																								txtTCNum,
																								javax.swing.GroupLayout.Alignment.TRAILING)
																						.addComponent(
																								txtAirplaneNum)))
														.addComponent(
																lblTCErr,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																Short.MAX_VALUE)
														.addComponent(
																lblAirplaineErr,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																180,
																javax.swing.GroupLayout.PREFERRED_SIZE)
														.addComponent(
																lblSeatsErr,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																Short.MAX_VALUE))
										.addContainerGap(18, Short.MAX_VALUE)));
		jPanel2Layout
				.setVerticalGroup(jPanel2Layout
						.createParallelGroup(
								javax.swing.GroupLayout.Alignment.LEADING)
						.addGroup(
								javax.swing.GroupLayout.Alignment.TRAILING,
								jPanel2Layout
										.createSequentialGroup()
										.addContainerGap()
										.addGroup(
												jPanel2Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.BASELINE)
														.addComponent(jLabel7)
														.addComponent(
																txtAirplaneNum,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
										.addComponent(
												lblAirplaineErr,
												javax.swing.GroupLayout.PREFERRED_SIZE,
												13,
												javax.swing.GroupLayout.PREFERRED_SIZE)
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
										.addGroup(
												jPanel2Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.BASELINE)
														.addComponent(jLabel9)
														.addComponent(
																txtBCNum,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.RELATED)
										.addComponent(
												lblBCErr,
												javax.swing.GroupLayout.PREFERRED_SIZE,
												13,
												javax.swing.GroupLayout.PREFERRED_SIZE)
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
										.addGroup(
												jPanel2Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.BASELINE)
														.addComponent(
																jLabel10,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE)
														.addComponent(
																txtFCNum,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.RELATED)
										.addComponent(
												lblFCErr,
												javax.swing.GroupLayout.PREFERRED_SIZE,
												13,
												javax.swing.GroupLayout.PREFERRED_SIZE)
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
										.addGroup(
												jPanel2Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.BASELINE)
														.addComponent(
																jLabel11,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE)
														.addComponent(
																txtTCNum,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.RELATED)
										.addComponent(
												lblTCErr,
												javax.swing.GroupLayout.PREFERRED_SIZE,
												13,
												javax.swing.GroupLayout.PREFERRED_SIZE)
										.addGap(18, 18, 18)
										.addComponent(
												lblSeatsErr,
												javax.swing.GroupLayout.PREFERRED_SIZE,
												13,
												javax.swing.GroupLayout.PREFERRED_SIZE)
										.addContainerGap(
												javax.swing.GroupLayout.DEFAULT_SIZE,
												Short.MAX_VALUE)));

		lblFlightNumErr.setName("lblFlightNumErr"); // NOI18N

		btnOk.setText("Submit");
		btnOk.addActionListener(new java.awt.event.ActionListener() {
			@Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				btnOkActionPerformed(evt);
			}
		});

		jLabel4.setText("Flight Cost:");

		jLabel5.setText("Source:");

		cbSource.addActionListener(new java.awt.event.ActionListener() {
			@Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				cbSourceActionPerformed(evt);
			}
		});

		jLabel8.setText("Destination:");

		javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(
				jPanel3);
		jPanel3.setLayout(jPanel3Layout);
		jPanel3Layout
				.setHorizontalGroup(jPanel3Layout
						.createParallelGroup(
								javax.swing.GroupLayout.Alignment.LEADING)
						.addGroup(
								jPanel3Layout
										.createSequentialGroup()
										.addContainerGap()
										.addGroup(
												jPanel3Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.LEADING,
																false)
														.addGroup(
																javax.swing.GroupLayout.Alignment.TRAILING,
																jPanel3Layout
																		.createSequentialGroup()
																		.addComponent(
																				jLabel4)
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
																		.addComponent(
																				txtFlightCost,
																				javax.swing.GroupLayout.PREFERRED_SIZE,
																				93,
																				javax.swing.GroupLayout.PREFERRED_SIZE)
																		.addGap(10,
																				10,
																				10))
														.addGroup(
																javax.swing.GroupLayout.Alignment.TRAILING,
																jPanel3Layout
																		.createSequentialGroup()
																		.addGroup(
																				jPanel3Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.TRAILING,
																								false)
																						.addGroup(
																								jPanel3Layout
																										.createSequentialGroup()
																										.addComponent(
																												jLabel5)
																										.addPreferredGap(
																												javax.swing.LayoutStyle.ComponentPlacement.RELATED,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												Short.MAX_VALUE)
																										.addComponent(
																												cbSource,
																												javax.swing.GroupLayout.PREFERRED_SIZE,
																												95,
																												javax.swing.GroupLayout.PREFERRED_SIZE))
																						.addGroup(
																								jPanel3Layout
																										.createSequentialGroup()
																										.addComponent(
																												jLabel8)
																										.addPreferredGap(
																												javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
																										.addComponent(
																												cbDestination,
																												javax.swing.GroupLayout.PREFERRED_SIZE,
																												95,
																												javax.swing.GroupLayout.PREFERRED_SIZE)))
																		.addGap(8,
																				8,
																				8))
														.addComponent(
																lblFlightCostErr,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																Short.MAX_VALUE))
										.addContainerGap(
												javax.swing.GroupLayout.DEFAULT_SIZE,
												Short.MAX_VALUE)));
		jPanel3Layout
				.setVerticalGroup(jPanel3Layout
						.createParallelGroup(
								javax.swing.GroupLayout.Alignment.LEADING)
						.addGroup(
								jPanel3Layout
										.createSequentialGroup()
										.addContainerGap()
										.addGroup(
												jPanel3Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.BASELINE)
														.addComponent(jLabel4)
														.addComponent(
																txtFlightCost,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
										.addComponent(
												lblFlightCostErr,
												javax.swing.GroupLayout.PREFERRED_SIZE,
												14,
												javax.swing.GroupLayout.PREFERRED_SIZE)
										.addPreferredGap(
												javax.swing.LayoutStyle.ComponentPlacement.RELATED)
										.addGroup(
												jPanel3Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.LEADING)
														.addComponent(
																cbSource,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE)
														.addComponent(jLabel5))
										.addGap(27, 27, 27)
										.addGroup(
												jPanel3Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.BASELINE)
														.addComponent(jLabel8)
														.addComponent(
																cbDestination,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addContainerGap(
												javax.swing.GroupLayout.DEFAULT_SIZE,
												Short.MAX_VALUE)));

		jdSourceDate.setDateFormatString("dd/MM/yyyy");
		jdSourceDate
				.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
					@Override
					public void propertyChange(
							java.beans.PropertyChangeEvent evt) {
						jdSourceDatePropertyChange(evt);
					}
				});

		jdDestinationDate.setDateFormatString("dd/MM/yyyy");

		buttonGroup1.add(rbAirplain);
		rbAirplain.setText("Choose airplaine");
		rbAirplain.addActionListener(new java.awt.event.ActionListener() {
			@Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				rbAirplainActionPerformed(evt);
			}
		});

		buttonGroup1.add(rbManually);
		rbManually.setText("Add new");
		rbManually.addActionListener(new java.awt.event.ActionListener() {
			@Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				rbManuallyActionPerformed(evt);
			}
		});

		jLabel6.setText("Select Airplaine:");

		cbAirplaines.addActionListener(new java.awt.event.ActionListener() {
			@Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
				cbAirplainesActionPerformed(evt);
			}
		});

		javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(
				jPanel1);
		jPanel1.setLayout(jPanel1Layout);
		jPanel1Layout
				.setHorizontalGroup(jPanel1Layout
						.createParallelGroup(
								javax.swing.GroupLayout.Alignment.LEADING)
						.addGroup(
								jPanel1Layout
										.createSequentialGroup()
										.addContainerGap()
										.addGroup(
												jPanel1Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.LEADING)
														.addGroup(
																jPanel1Layout
																		.createSequentialGroup()
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.LEADING)
																						.addGroup(
																								jPanel1Layout
																										.createParallelGroup(
																												javax.swing.GroupLayout.Alignment.TRAILING,
																												false)
																										.addComponent(
																												lblFlightNumErr,
																												javax.swing.GroupLayout.Alignment.LEADING,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												Short.MAX_VALUE)
																										.addGroup(
																												javax.swing.GroupLayout.Alignment.LEADING,
																												jPanel1Layout
																														.createSequentialGroup()
																														.addGroup(
																																jPanel1Layout
																																		.createParallelGroup(
																																				javax.swing.GroupLayout.Alignment.LEADING)
																																		.addComponent(
																																				jLabel3)
																																		.addComponent(
																																				jLabel2)
																																		.addComponent(
																																				jLabel1))
																														.addPreferredGap(
																																javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
																														.addGroup(
																																jPanel1Layout
																																		.createParallelGroup(
																																				javax.swing.GroupLayout.Alignment.LEADING)
																																		.addComponent(
																																				jdSourceDate,
																																				javax.swing.GroupLayout.PREFERRED_SIZE,
																																				97,
																																				javax.swing.GroupLayout.PREFERRED_SIZE)
																																		.addComponent(
																																				jdDestinationDate,
																																				javax.swing.GroupLayout.PREFERRED_SIZE,
																																				97,
																																				javax.swing.GroupLayout.PREFERRED_SIZE)
																																		.addComponent(
																																				txtFlightNum,
																																				javax.swing.GroupLayout.PREFERRED_SIZE,
																																				97,
																																				javax.swing.GroupLayout.PREFERRED_SIZE))))
																						.addGroup(
																								jPanel1Layout
																										.createParallelGroup(
																												javax.swing.GroupLayout.Alignment.TRAILING,
																												false)
																										.addComponent(
																												lblDetinationDateErr,
																												javax.swing.GroupLayout.Alignment.LEADING,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												206,
																												Short.MAX_VALUE)
																										.addComponent(
																												lblSorceDateErr,
																												javax.swing.GroupLayout.Alignment.LEADING,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												Short.MAX_VALUE))
																						.addGroup(
																								jPanel1Layout
																										.createParallelGroup(
																												javax.swing.GroupLayout.Alignment.TRAILING,
																												false)
																										.addGroup(
																												javax.swing.GroupLayout.Alignment.LEADING,
																												jPanel1Layout
																														.createSequentialGroup()
																														.addGap(10,
																																10,
																																10)
																														.addComponent(
																																jLabel6)
																														.addGap(29,
																																29,
																																29)
																														.addComponent(
																																cbAirplaines,
																																0,
																																javax.swing.GroupLayout.DEFAULT_SIZE,
																																Short.MAX_VALUE))
																										.addComponent(
																												jPanel2,
																												javax.swing.GroupLayout.PREFERRED_SIZE,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												javax.swing.GroupLayout.PREFERRED_SIZE)))
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.LEADING)
																						.addGroup(
																								jPanel1Layout
																										.createSequentialGroup()
																										.addGap(18,
																												18,
																												18)
																										.addComponent(
																												jPanel3,
																												javax.swing.GroupLayout.PREFERRED_SIZE,
																												javax.swing.GroupLayout.DEFAULT_SIZE,
																												javax.swing.GroupLayout.PREFERRED_SIZE))
																						.addGroup(
																								javax.swing.GroupLayout.Alignment.TRAILING,
																								jPanel1Layout
																										.createSequentialGroup()
																										.addPreferredGap(
																												javax.swing.LayoutStyle.ComponentPlacement.RELATED)
																										.addComponent(
																												btnOk)
																										.addGap(20,
																												20,
																												20))))
														.addGroup(
																jPanel1Layout
																		.createSequentialGroup()
																		.addComponent(
																				rbAirplain)
																		.addGap(10,
																				10,
																				10)
																		.addComponent(
																				rbManually)))
										.addContainerGap(
												javax.swing.GroupLayout.DEFAULT_SIZE,
												Short.MAX_VALUE)));
		jPanel1Layout
				.setVerticalGroup(jPanel1Layout
						.createParallelGroup(
								javax.swing.GroupLayout.Alignment.LEADING)
						.addGroup(
								jPanel1Layout
										.createSequentialGroup()
										.addGroup(
												jPanel1Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.LEADING)
														.addGroup(
																jPanel1Layout
																		.createSequentialGroup()
																		.addContainerGap()
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.BASELINE)
																						.addComponent(
																								jLabel1)
																						.addComponent(
																								txtFlightNum,
																								javax.swing.GroupLayout.PREFERRED_SIZE,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								javax.swing.GroupLayout.PREFERRED_SIZE))
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
																		.addComponent(
																				lblFlightNumErr,
																				javax.swing.GroupLayout.PREFERRED_SIZE,
																				13,
																				javax.swing.GroupLayout.PREFERRED_SIZE)
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.RELATED)
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.LEADING)
																						.addComponent(
																								jLabel2)
																						.addComponent(
																								jdSourceDate,
																								javax.swing.GroupLayout.PREFERRED_SIZE,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								javax.swing.GroupLayout.PREFERRED_SIZE))
																		.addGap(7,
																				7,
																				7)
																		.addComponent(
																				lblSorceDateErr,
																				javax.swing.GroupLayout.PREFERRED_SIZE,
																				13,
																				javax.swing.GroupLayout.PREFERRED_SIZE)
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.LEADING)
																						.addComponent(
																								jLabel3)
																						.addComponent(
																								jdDestinationDate,
																								javax.swing.GroupLayout.PREFERRED_SIZE,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								javax.swing.GroupLayout.PREFERRED_SIZE))
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.RELATED)
																		.addComponent(
																				lblDetinationDateErr,
																				javax.swing.GroupLayout.PREFERRED_SIZE,
																				13,
																				javax.swing.GroupLayout.PREFERRED_SIZE))
														.addComponent(
																jPanel3,
																javax.swing.GroupLayout.PREFERRED_SIZE,
																javax.swing.GroupLayout.DEFAULT_SIZE,
																javax.swing.GroupLayout.PREFERRED_SIZE))
										.addGroup(
												jPanel1Layout
														.createParallelGroup(
																javax.swing.GroupLayout.Alignment.TRAILING)
														.addGroup(
																jPanel1Layout
																		.createSequentialGroup()
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.RELATED,
																				javax.swing.GroupLayout.DEFAULT_SIZE,
																				Short.MAX_VALUE)
																		.addComponent(
																				btnOk))
														.addGroup(
																jPanel1Layout
																		.createSequentialGroup()
																		.addGap(7,
																				7,
																				7)
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.BASELINE)
																						.addComponent(
																								rbAirplain)
																						.addComponent(
																								rbManually))
																		.addPreferredGap(
																				javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
																		.addGroup(
																				jPanel1Layout
																						.createParallelGroup(
																								javax.swing.GroupLayout.Alignment.BASELINE)
																						.addComponent(
																								jLabel6)
																						.addComponent(
																								cbAirplaines,
																								javax.swing.GroupLayout.PREFERRED_SIZE,
																								javax.swing.GroupLayout.DEFAULT_SIZE,
																								javax.swing.GroupLayout.PREFERRED_SIZE))
																		.addGap(18,
																				18,
																				18)
																		.addComponent(
																				jPanel2,
																				javax.swing.GroupLayout.DEFAULT_SIZE,
																				javax.swing.GroupLayout.DEFAULT_SIZE,
																				Short.MAX_VALUE)))
										.addContainerGap()));

		javax.swing.GroupLayout layout = new javax.swing.GroupLayout(
				getContentPane());
		getContentPane().setLayout(layout);
		layout.setHorizontalGroup(layout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				layout.createSequentialGroup()
						.addContainerGap()
						.addComponent(jPanel1,
								javax.swing.GroupLayout.PREFERRED_SIZE,
								javax.swing.GroupLayout.DEFAULT_SIZE,
								javax.swing.GroupLayout.PREFERRED_SIZE)
						.addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
								Short.MAX_VALUE)));
		layout.setVerticalGroup(layout.createParallelGroup(
				javax.swing.GroupLayout.Alignment.LEADING).addGroup(
				layout.createSequentialGroup()
						.addContainerGap()
						.addComponent(jPanel1,
								javax.swing.GroupLayout.DEFAULT_SIZE,
								javax.swing.GroupLayout.DEFAULT_SIZE,
								Short.MAX_VALUE).addContainerGap()));

		pack();
	}// </editor-fold>//GEN-END:initComponents

    /**
     * save action on {@link #btnOk} action perform 
     * @exception {@ link exceptions.AddFlightExeption}
     */
	private void btnOkActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_btnOkActionPerformed
		// TODO add your handling code here:

		saveChnges();

	}// GEN-LAST:event_btnOkActionPerformed

	private void cbSourceActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_cbSourceActionPerformed
		// TODO add your handling code here:
		if (cbSource.getModel().getSize() <= 0) {
			return;
		}

		String name = ((String)((ComboItem) cbSource.getSelectedItem()).getKey());
		E_Airports airPort = E_Airports.valueOf(name);
		ArrayList<E_Airports> list = new ArrayList<E_Airports>();
		list.add(airPort);
		HelperClass.fillAirportsCombo(this, cbDestination, list);
	}// GEN-LAST:event_cbSourceActionPerformed

	private void jdSourceDatePropertyChange(java.beans.PropertyChangeEvent evt) {// GEN-FIRST:event_jdSourceDatePropertyChange
		// TODO add your handling code here:
		if ("date".equals(evt.getPropertyName())) {
			String s = evt.getPropertyName();

			Date d;
			d = (Date) evt.getNewValue();

			jdDestinationDate.setDate(d);
			jdDestinationDate.setMinSelectableDate(d);

		}
	}// GEN-LAST:event_jdSourceDatePropertyChange

	private void rbAirplainActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_rbAirplainActionPerformed
		// TODO add your handling code here:
		JRadioButton choice = (JRadioButton) evt.getSource();
		if (choice != null && choice.isSelected()) {
			airplaineMode(true);
		}
	}// GEN-LAST:event_rbAirplainActionPerformed

	private void rbManuallyActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_rbManuallyActionPerformed
		// TODO add your handling code here:
		JRadioButton choice = (JRadioButton) evt.getSource();
		if (choice != null && choice.isSelected()) {
			airplaineMode(false);
		}
	}// GEN-LAST:event_rbManuallyActionPerformed

	private void cbAirplainesActionPerformed(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_cbAirplainesActionPerformed
		// TODO add your handling code here:
		this.airplaineMode(true);
	}// GEN-LAST:event_cbAirplainesActionPerformed

	// Variables declaration - do not modify//GEN-BEGIN:variables
	private javax.swing.JButton btnOk;
	private javax.swing.ButtonGroup buttonGroup1;
	private javax.swing.JComboBox cbAirplaines;
	private javax.swing.JComboBox cbDestination;
	private javax.swing.JComboBox cbSource;
	private javax.swing.JLabel jLabel1;
	private javax.swing.JLabel jLabel10;
	private javax.swing.JLabel jLabel11;
	private javax.swing.JLabel jLabel2;
	private javax.swing.JLabel jLabel3;
	private javax.swing.JLabel jLabel4;
	private javax.swing.JLabel jLabel5;
	private javax.swing.JLabel jLabel6;
	private javax.swing.JLabel jLabel7;
	private javax.swing.JLabel jLabel8;
	private javax.swing.JLabel jLabel9;
	private javax.swing.JPanel jPanel1;
	private javax.swing.JPanel jPanel2;
	private javax.swing.JPanel jPanel3;
	private com.toedter.calendar.JDateChooser jdDestinationDate;
	private com.toedter.calendar.JDateChooser jdSourceDate;
	private javax.swing.JLabel lblAirplaineErr;
	private javax.swing.JLabel lblBCErr;
	private javax.swing.JLabel lblDetinationDateErr;
	private javax.swing.JLabel lblFCErr;
	private javax.swing.JLabel lblFlightCostErr;
	private javax.swing.JLabel lblFlightNumErr;
	private javax.swing.JLabel lblSeatsErr;
	private javax.swing.JLabel lblSorceDateErr;
	private javax.swing.JLabel lblTCErr;
	private javax.swing.JRadioButton rbAirplain;
	private javax.swing.JRadioButton rbManually;
	private javax.swing.JTextField txtAirplaneNum;
	private javax.swing.JTextField txtBCNum;
	private javax.swing.JTextField txtFCNum;
	private javax.swing.JTextField txtFlightCost;
	private javax.swing.JTextField txtFlightNum;
	private javax.swing.JTextField txtTCNum;

	// End of variables declaration//GEN-END:variables

	private void fillCbAirports() {

		HelperClass.fillAirportsCombo(this, cbSource, null);
		if (cbSource.getModel().getSize() <= 0) {
			return;
		}
		String name = ((String)((ComboItem) cbSource.getSelectedItem()).getKey());
		E_Airports airPort = E_Airports.valueOf(name);
		ArrayList<E_Airports> list = new ArrayList<E_Airports>();
		list.add(airPort);
		HelperClass.fillAirportsCombo(this, cbDestination, list);
	}

	private void saveChnges() {

		boolean result = true;
		JLabel[] arry = { lblFlightNumErr, lblSorceDateErr,
				lblDetinationDateErr, lblAirplaineErr, lblBCErr, lblFCErr,
				lblTCErr, lblFlightCostErr };
		int sum = 0;
		for (JLabel lable : arry) {
			Component c = lable.getLabelFor();
			if (c != null) {
				String tempErr = null;
				String s = lable.getName();
				if (lable.equals(lblSorceDateErr)
						|| lable.equals(lblDetinationDateErr)) {
					if (((JDateChooser) c).getDate() == null) {
						tempErr = "Date is in incorrect format or empty";
					}
				} else if (lable.equals(lblBCErr) || lable.equals(lblFCErr)
						|| lable.equals(lblTCErr)) {
					if (!rbManually.isSelected()) {
						continue;
					}

					tempErr = HelperClass.getErrMsg(((JTextField) c).getText(),
							"Number");
					if (tempErr == null) {
						sum += Integer.parseInt(((JTextField) c).getText());
					}
				} else if (lable.equals(lblAirplaineErr)) {
					if (!rbManually.isSelected()) {
						continue;
					}
					tempErr = HelperClass.getErrMsg(((JTextField) c).getText(),
							"Number");
				} else {
					tempErr = HelperClass.getErrMsg(((JTextField) c).getText(),
							"Number");
				}

				if (tempErr != null) {
					result = false;
					lable.setText(tempErr);
					lable.setForeground(Color.red);
				} else {
					lable.setText("");
				}
			}
		}

		int airplaneNumber;
		if (rbManually.isSelected()) {
			if (sum > 500) {
				result = false;
				lblSeatsErr.setText("Max. total number of seat : 500");
				lblSeatsErr.setVisible(true);
				lblSeatsErr.setForeground(Color.red);
			} else if (sum == 0) {
				result = false;
				lblSeatsErr.setText("Number of seat cant be 0");
				lblSeatsErr.setVisible(true);
				lblSeatsErr.setForeground(Color.red);
			} else {
				lblSeatsErr.setVisible(false);
			}
			
			ComboItem item = HelperClass.getItemIndex(cbAirplaines, Integer.parseInt(txtAirplaneNum.getText()));
			if(item != null){
				shoMissingDataMsg("This airplane number already exist");
				return;
			}
		}

		if (result) {
			try {
				int flightNumber, flightCost, numberOfSeatsBusinessClass, numberOfSeatsFirstClass, numberOfSeatsTouristsClass;
				Date flightDateAndTimeSource = null;
				Date flightDateAndTimeDestination = null;
				E_Airports source, destination;

				flightCost = Integer.parseInt(txtFlightCost.getText());
				Airplane airplane;
				if (rbManually.isSelected()) {
					numberOfSeatsBusinessClass = Integer.parseInt(txtBCNum
							.getText());
					numberOfSeatsFirstClass = Integer.parseInt(txtFCNum
							.getText());
					numberOfSeatsTouristsClass = Integer.parseInt(txtTCNum
							.getText());
					airplaneNumber = Integer.parseInt(txtAirplaneNum.getText());
					airplane = new Airplane(airplaneNumber,
							numberOfSeatsBusinessClass,
							numberOfSeatsFirstClass, numberOfSeatsTouristsClass);
				} else {
					if (cbAirplaines.getModel().getSize() <= 0) {
						shoMissingDataMsg("Airplane is missing");
						return;
					}

					airplaneNumber = Integer.parseInt((String)((ComboItem) cbAirplaines
							.getSelectedItem()).getKey());
					airplane = MainClass.getIfly()
							.getAirplaines(airplaneNumber).get(0);

				}
				flightNumber = Integer.parseInt(txtFlightNum.getText());

				flightDateAndTimeSource = jdSourceDate.getDate();
				flightDateAndTimeDestination = jdDestinationDate.getDate();

				source = E_Airports.valueOf((String)((ComboItem) cbSource
						.getSelectedItem()).getKey());
				destination = E_Airports.valueOf((String)((ComboItem) cbDestination
						.getSelectedItem()).getKey());

				MainClass.getIfly().addFlight(flightNumber,
						flightDateAndTimeSource, flightDateAndTimeDestination,
						flightCost, source, destination, airplane);
				JOptionPane.showInternalConfirmDialog(this, "Saved changes",
						"Confirmation", JOptionPane.PLAIN_MESSAGE,
						JOptionPane.INFORMATION_MESSAGE);
				setIflyState(false);
				fillAirplaines(null);
			} catch (NumberFormatException ex) {
				JOptionPane.showInternalConfirmDialog(this, ex.getMessage(),
						"Error", JOptionPane.PLAIN_MESSAGE,
						JOptionPane.ERROR_MESSAGE);
			} catch (AddFlightExeption ex) {
				JOptionPane.showInternalConfirmDialog(this, ex.getMessage(),
						"Error", JOptionPane.PLAIN_MESSAGE,
						JOptionPane.ERROR_MESSAGE);
			}
		}
	}

	private void setLables() {
		lblAirplaineErr.setLabelFor(txtAirplaneNum);
		lblFlightNumErr.setLabelFor(txtFlightNum);
		lblBCErr.setLabelFor(txtBCNum);
		lblDetinationDateErr.setLabelFor(jdDestinationDate);
		lblFCErr.setLabelFor(txtFCNum);
		lblTCErr.setLabelFor(txtTCNum);
		lblSorceDateErr.setLabelFor(jdSourceDate);
		lblFlightCostErr.setLabelFor(txtFlightCost);
	}

	private void fillAirplaines(Integer number) {
		HelperClass.fillAirplaines(this, cbAirplaines, number);
	}

	private void airplaineMode(boolean autoMode) {

		lblTCErr.setText(null);
		lblFCErr.setText(null);
		lblBCErr.setText(null);
		lblSeatsErr.setText(null);
		lblAirplaineErr.setText(null);

		txtBCNum.setText(null);
		txtFCNum.setText(null);
		txtTCNum.setText(null);
		txtAirplaneNum.setText(null);

		txtBCNum.setEnabled(!autoMode);
		txtFCNum.setEnabled(!autoMode);
		txtTCNum.setEnabled(!autoMode);
		txtAirplaneNum.setEnabled(!autoMode);
		cbAirplaines.setEnabled(autoMode);

		if (autoMode && cbAirplaines.getModel().getSize() > 0) {
			int airplaneNumber;
			Airplane airplane;
			airplaneNumber = Integer.parseInt((String)((ComboItem) cbAirplaines
					.getSelectedItem()).getKey());
			airplane = MainClass.getIfly().getAirplaines(airplaneNumber).get(0);
			txtBCNum.setText("" + airplane.getNumberOfSeatsBusinessClass() + "");
			txtFCNum.setText("" + airplane.getNumberOfSeatsFirstClass() + "");
			txtTCNum.setText("" + airplane.getNumberOfSeatsTouristsClass() + "");
			txtAirplaneNum.setText("" + airplane.getAirplaneNumber() + "");
		}
	}

}
